---
import '../styles/verse-card.css';
 
// Props
const {
  verseNumber = 1,
  arabicText = "ٱلْـحَمْدُ لِلَّهِ رَبِّ ٱلْعَٰلَمِينَ",
  translation = "[All] praise is [due] to Allah, Lord of the worlds",
  transliteration = "Alḥamdu lillāhi rabbi l-ʿālamīn"
} = Astro.props;
---
  
<div class="container">
  <div class="left-column">
    <div class="left-box">
      <span class="square-icon">{verseNumber}</span>
    </div>
    <div class="left-box">
      <span
        class="play-icon test-btn"
        role="button"
        tabindex="0"
        aria-label="Play verse"
        data-verse={verseNumber}
      ></span>
    </div>
    <div class="left-box"><span class="share-icon"></span></div>
    <div class="left-box"><span class="star-icon"></span></div>
  </div>

  <div class="right-column">
    <div class="right-box quran-verses" dir="rtl">{arabicText}</div>
    <div class="right-box quran-translations">{translation}</div>
    <div class="right-box quran-translations">{transliteration || '— Transliteration'}</div>
  </div>
</div>

<!-- ✅ External JS logic for click/enter events -->
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const buttons = document.querySelectorAll('.test-btn');

    buttons.forEach((btn) => {
      const verseNumber = btn.getAttribute('data-verse');

      const playAudio = () => {
        alert(`Verse Number: ${verseNumber}`); // ✅ Test alert
        const audio = new Audio(`/audio/verse-${verseNumber}.mp3`);
        audio.play().catch(e => console.error('Audio playback failed', e));
      };

      btn.addEventListener('click', playAudio);
      btn.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') playAudio();
      });
    });
  });
</script>
